(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("pixi.js")):"function"==typeof define&&define.amd?define(["exports","pixi.js"],b):(a=a||self,b(a.SceneKit={},a.PIXI))})(this,function(a,b){'use strict';/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */ /* global Reflect, Promise */function c(a,c){function b(){this.constructor=a}e(a,c),a.prototype=null===c?Object.create(c):(b.prototype=c.prototype,new b)}/**
     * @class
     * @property { Bumber } x - 世界坐标 `x` 值
     * @property { Bumber } y - 世界坐标 `y` 值
     */var e=function(a,c){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])},e(a,c)},f=/** @class */function(a){function b(b){var c=a.call(this)||this;return c.init(),c.scene=b,c}return c(b,a),b.prototype.init=function(){this.x=0,this.y=0},b.prototype.onSceneChange=function(){this.init()},b.prototype.shutdown=function(){this.removeChildren()},b}(b.Container),g=/** @class */function(){function a(b){this.name=b,this.canUpdate=!1,this.world=new f(this),this.game=a.game,this.route=a.route,this.route.push(this)}return Object.defineProperty(a.prototype,"Loader",{get:function(){return{add:function(){for(var a,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];b.Loader.shared.resources[c[0]]||(a=b.Loader.shared).add.apply(a,c)},onLoaded:function(a){void 0===a&&(a=function(){}),b.Loader.shared.load(a)}}},enumerable:!0,configurable:!0}),a.prototype.switchTo=function(a,b){void 0===b&&(b={}),this.route.to(a,b)},a.prototype.getQuery=function(a){return a?this.route.query[a]:this.route.query},a.prototype.create=function(){},a.prototype.update=function(){},a.prototype.shutdown=function(a){void 0===a&&(a=!0),this.canUpdate=!1,a&&this.world.shutdown()},a}(),h=/** @class */function(){function a(a){this.game=a,this.scenes={},this.query={},this.prevSceneName=null,this.currentSceneName=null,this.pendingSceneName=null,this.currentScene=null,this.instance=null}/**
         * 把场景保存在 `this.scenes` 中
         * @param { Scene } scene - 场景实例
         * @ignore
         */return a.prototype.push=function(a){this.scenes[a.name]=a},a.prototype.remove=function(a){"string"==typeof a?delete this.scenes[a]:a instanceof g?delete this.scenes[a.name]:console.warn("\u9700\u8981\u79FB\u9664\u7684\u573A\u666F "+a+" \u4E0D\u5B58\u5728")},a.prototype.start=function(a,b){void 0===a&&(a=""),void 0===b&&(b={}),this.to(a,b)},a.prototype.to=function(a,b){return this.currentSceneName!==a&&void(this.isScene(a)&&(this.pendingSceneName=a,this.query=b))},a.prototype.update=function(){this.pendingSceneName&&this.setCurrentScene(this.pendingSceneName),this.currentScene&&this.currentScene.canUpdate&&this.currentScene.update&&this.currentScene.update()},a.prototype.setCurrentScene=function(a){return this.isScene(a)?void(this.currentSceneName!==this.pendingSceneName&&(this.currentScene=this.scenes[a],this.setGameWorld(),this.cleanStage(),this.fetchNextScene(),this.stateUpdate(),this.onSceneChange())):(console.warn("\u573A\u666F "+a+" \u4E0D\u5B58\u5728"),!1)},a.prototype.setGameWorld=function(){this.game.world=this.currentScene.world},a.prototype.cleanStage=function(){this.game.stage.removeChildren()},a.prototype.fetchNextScene=function(){var a=this;this.game.stage.addChild(this.currentScene.world),this.currentScene.Load&&"function"==typeof this.currentScene.Load?this.currentScene.Load(function(){a.currentScene.create()}):this.currentScene.create(),this.pendingSceneName=null},a.prototype.stateUpdate=function(){this.prevSceneName=this.currentSceneName,this.currentSceneName=this.currentScene.name},a.prototype.onSceneChange=function(){if(this.prevSceneName){var a=this.scenes[this.prevSceneName];a.shutdown(),this.game.stage.removeChild(a.world)}this.currentScene.world.onSceneChange()},a.prototype.getCurrentScene=function(){return this.currentScene},a.prototype.getSceneByName=function(a){return this.scenes[a]?this.scenes[a]:void console.error("\u573A\u666F "+a+" \u4E0D\u5B58\u5728")},a.prototype.isScene=function(a){void 0===a&&(a="");var b=void 0!==this.scenes[a];return b},a.prototype.destroy=function(){this.game=null,this.scenes={},this.pendingSceneName=null,this.currentSceneName=null,this.currentScene=null},a}();a.Scene=g,a.useScene=function(a,b){var c=new h(a),d=Object.keys(b),e=Object.values(b);e.map(function(b,e){b.__proto__.game=a,b.__proto__.route=c,new b(d[e])}),c.start(d[0]),a.ticker.add(function(){return c.update()})},Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=scene.min.js.map
