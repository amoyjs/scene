import"url";/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */ /* global Reflect, Promise */var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},extendStatics(e,t)};function __extends(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var commonjsGlobal="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis;function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var isMobile=createCommonjsModule(function(e){(function(t){// Match 'Mobile' AND 'Firefox'
function n(e,t){return e.test(t)}function o(e){var t=e||("undefined"==typeof navigator?"":navigator.userAgent),o=t.split("[FBAN");// Facebook mobile app's integrated browser adds a bunch of strings that
// match everything. Strip it out if it exists.
"undefined"!=typeof o[1]&&(t=o[0]),o=t.split("Twitter"),"undefined"!=typeof o[1]&&(t=o[0]);var f={apple:{phone:n(r,t)&&!n(l,t),ipod:n(a,t),tablet:!n(r,t)&&n(i,t)&&!n(l,t),device:(n(r,t)||n(a,t)||n(i,t))&&!n(l,t)},amazon:{phone:n(s,t),tablet:!n(s,t)&&n(c,t),device:n(s,t)||n(c,t)},android:{phone:!n(l,t)&&n(s,t)||!n(l,t)&&n(d,t),tablet:!n(l,t)&&!n(s,t)&&!n(d,t)&&(n(c,t)||n(p,t)),device:!n(l,t)&&(n(s,t)||n(c,t)||n(d,t)||n(p,t))||n(/\bokhttp\b/i,t)},windows:{phone:n(l,t),tablet:n(y,t),device:n(l,t)||n(y,t)},other:{blackberry:n(m,t),blackberry10:n(h,t),opera:n(_,t),firefox:n(x,t),chrome:n(u,t),device:n(m,t)||n(h,t)||n(_,t)||n(x,t)||n(u,t)}};return f.any=f.apple.device||f.android.device||f.windows.device||f.other.device,// excludes 'other' devices and ipods, targeting touchscreen phones
f.phone=f.apple.phone||f.android.phone||f.windows.phone,f.tablet=f.apple.tablet||f.android.tablet||f.windows.tablet,f}var r=/iPhone/i,a=/iPod/i,i=/iPad/i,d=/\bAndroid(?:.+)Mobile\b/i,// Match 'Android' AND 'Mobile'
p=/Android/i,s=/\bAndroid(?:.+)SD4930UR\b/i,c=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,l=/Windows Phone/i,y=/\bWindows(?:.+)ARM\b/i,// Match 'Windows' AND 'ARM'
m=/BlackBerry/i,h=/BB10/i,_=/Opera Mini/i,u=/\b(CriOS|Chrome)(?:.+)Mobile/i,x=/Mobile(?:.+)Firefox\b/i;e.exports&&"undefined"==typeof window?e.exports=o:e.exports&&"undefined"!=typeof window?(e.exports=o(),e.exports.isMobile=o):t.isMobile=o()})(commonjsGlobal)}),isMobile_1=isMobile.isMobile;/*!
 * @pixi/settings - v5.1.0
 * Compiled Fri, 19 Jul 2019 21:54:36 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ /**
 * The maximum recommended texture units to use.
 * In theory the bigger the better, and for desktop we'll use as many as we can.
 * But some mobile devices slow down if there is to many branches in the shader.
 * So in practice there seems to be a sweet spot size that varies depending on the device.
 *
 * In v4, all mobile devices were limited to 4 texture units because for this.
 * In v5, we allow all texture units to be used on modern Apple or Android devices.
 *
 * @private
 * @param {number} max
 * @returns {number}
 */function maxRecommendedTextures(e){var t=!0;if(isMobile.tablet||isMobile.phone){if(t=!1,isMobile.apple.device){var n=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(n){var o=parseInt(n[1],10);// All texture units can be used on devices that support ios 11 or above
11<=o&&(t=!0)}}if(isMobile.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var a=parseInt(r[1],10);// All texture units can be used on devices that support Android 7 (Nougat) or above
7<=a&&(t=!0)}}}return t?e:4}/**
 * Uploading the same buffer multiple times in a single frame can cause performance issues.
 * Apparent on iOS so only check for that at the moment
 * This check may become more complex if this issue pops up elsewhere.
 *
 * @private
 * @returns {boolean}
 */function canUploadSameBuffer(){return!isMobile.apple.device}/**
 * User's customizable globals for overriding the default PIXI settings, such
 * as a renderer's default resolution, framerate, float precision, etc.
 * @example
 * // Use the native window resolution as the default resolution
 * // will support high-density displays when rendering
 * PIXI.settings.RESOLUTION = window.devicePixelRatio.
 *
 * // Disable interpolation when scaling, will make texture be pixelated
 * PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;
 * @namespace PIXI.settings
 */var settings={/**
     * If set to true WebGL will attempt make textures mimpaped by default.
     * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.
     *
     * @static
     * @name MIPMAP_TEXTURES
     * @memberof PIXI.settings
     * @type {PIXI.MIPMAP_MODES}
     * @default PIXI.MIPMAP_MODES.POW2
     */MIPMAP_TEXTURES:1,/**
     * Default anisotropic filtering level of textures.
     * Usually from 0 to 16
     *
     * @static
     * @name ANISOTROPIC_LEVEL
     * @memberof PIXI.settings
     * @type {number}
     * @default 16
     */ANISOTROPIC_LEVEL:0,/**
     * Default resolution / device pixel ratio of the renderer.
     *
     * @static
     * @name RESOLUTION
     * @memberof PIXI.settings
     * @type {number}
     * @default 1
     */RESOLUTION:1,/**
     * Default filter resolution.
     *
     * @static
     * @name FILTER_RESOLUTION
     * @memberof PIXI.settings
     * @type {number}
     * @default 1
     */FILTER_RESOLUTION:1,/**
     * The maximum textures that this device supports.
     *
     * @static
     * @name SPRITE_MAX_TEXTURES
     * @memberof PIXI.settings
     * @type {number}
     * @default 32
     */SPRITE_MAX_TEXTURES:maxRecommendedTextures(32),// TODO: maybe change to SPRITE.BATCH_SIZE: 2000
// TODO: maybe add PARTICLE.BATCH_SIZE: 15000
/**
     * The default sprite batch size.
     *
     * The default aims to balance desktop and mobile devices.
     *
     * @static
     * @name SPRITE_BATCH_SIZE
     * @memberof PIXI.settings
     * @type {number}
     * @default 4096
     */SPRITE_BATCH_SIZE:4096,/**
     * The default render options if none are supplied to {@link PIXI.Renderer}
     * or {@link PIXI.CanvasRenderer}.
     *
     * @static
     * @name RENDER_OPTIONS
     * @memberof PIXI.settings
     * @type {object}
     * @property {HTMLCanvasElement} view=null
     * @property {number} resolution=1
     * @property {boolean} antialias=false
     * @property {boolean} forceFXAA=false
     * @property {boolean} autoDensity=false
     * @property {boolean} transparent=false
     * @property {number} backgroundColor=0x000000
     * @property {boolean} clearBeforeRender=true
     * @property {boolean} preserveDrawingBuffer=false
     * @property {number} width=800
     * @property {number} height=600
     * @property {boolean} legacy=false
     */RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},/**
     * Default Garbage Collection mode.
     *
     * @static
     * @name GC_MODE
     * @memberof PIXI.settings
     * @type {PIXI.GC_MODES}
     * @default PIXI.GC_MODES.AUTO
     */GC_MODE:0,/**
     * Default Garbage Collection max idle.
     *
     * @static
     * @name GC_MAX_IDLE
     * @memberof PIXI.settings
     * @type {number}
     * @default 3600
     */GC_MAX_IDLE:3600,/**
     * Default Garbage Collection maximum check count.
     *
     * @static
     * @name GC_MAX_CHECK_COUNT
     * @memberof PIXI.settings
     * @type {number}
     * @default 600
     */GC_MAX_CHECK_COUNT:600,/**
     * Default wrap modes that are supported by pixi.
     *
     * @static
     * @name WRAP_MODE
     * @memberof PIXI.settings
     * @type {PIXI.WRAP_MODES}
     * @default PIXI.WRAP_MODES.CLAMP
     */WRAP_MODE:33071,/**
     * Default scale mode for textures.
     *
     * @static
     * @name SCALE_MODE
     * @memberof PIXI.settings
     * @type {PIXI.SCALE_MODES}
     * @default PIXI.SCALE_MODES.LINEAR
     */SCALE_MODE:1,/**
     * Default specify float precision in vertex shader.
     *
     * @static
     * @name PRECISION_VERTEX
     * @memberof PIXI.settings
     * @type {PIXI.PRECISION}
     * @default PIXI.PRECISION.HIGH
     */PRECISION_VERTEX:"highp",/**
     * Default specify float precision in fragment shader.
     * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742
     *
     * @static
     * @name PRECISION_FRAGMENT
     * @memberof PIXI.settings
     * @type {PIXI.PRECISION}
     * @default PIXI.PRECISION.MEDIUM
     */PRECISION_FRAGMENT:isMobile.apple.device?"highp":"mediump",/**
     * Can we upload the same buffer in a single frame?
     *
     * @static
     * @name CAN_UPLOAD_SAME_BUFFER
     * @memberof PIXI.settings
     * @type {boolean}
     */CAN_UPLOAD_SAME_BUFFER:canUploadSameBuffer(),/**
     * Enables bitmap creation before image load. This feature is experimental.
     *
     * @static
     * @name CREATE_IMAGE_BITMAP
     * @memberof PIXI.settings
     * @type {boolean}
     * @default false
     */CREATE_IMAGE_BITMAP:!1,/**
     * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.
     * Advantages can include sharper image quality (like text) and faster rendering on canvas.
     * The main disadvantage is movement of objects may appear less smooth.
     *
     * @static
     * @constant
     * @memberof PIXI.settings
     * @type {boolean}
     * @default false
     */ROUND_PIXELS:!1},Point=function(e,t){/**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t};/*!
 * @pixi/math - v5.1.0
 * Compiled Fri, 19 Jul 2019 21:54:36 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ /**
 * The Point object represents a location in a two-dimensional coordinate system, where x represents
 * the horizontal axis and y represents the vertical axis.
 *
 * @class
 * @memberof PIXI
 */Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},Point.prototype.copyTo=function(e){return e.set(this.x,this.y),e},Point.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},Point.prototype.set=function(e,t){this.x=e||0,this.y=t||(0===t?0:this.x)};/**
 * The Point object represents a location in a two-dimensional coordinate system, where x represents
 * the horizontal axis and y represents the vertical axis.
 *
 * An ObservablePoint is a point that triggers a callback when the point's position is changed.
 *
 * @class
 * @memberof PIXI
 */var ObservablePoint=function(e,t,n,o){void 0===n&&(n=0),void 0===o&&(o=0),this._x=n,this._y=o,this.cb=e,this.scope=t},prototypeAccessors={x:{configurable:!0},y:{configurable:!0}};ObservablePoint.prototype.clone=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=e||this.cb,o=t||this.scope;return new ObservablePoint(n,o,this._x,this._y)},ObservablePoint.prototype.set=function(e,t){var n=e||0,o=t||(0===t?0:n);(this._x!==n||this._y!==o)&&(this._x=n,this._y=o,this.cb.call(this.scope))},ObservablePoint.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},ObservablePoint.prototype.copyTo=function(e){return e.set(this._x,this._y),e},ObservablePoint.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},prototypeAccessors.x.get=function(){return this._x},prototypeAccessors.x.set=function(e)// eslint-disable-line require-jsdoc
{this._x!==e&&(this._x=e,this.cb.call(this.scope))},prototypeAccessors.y.get=function(){return this._y},prototypeAccessors.y.set=function(e)// eslint-disable-line require-jsdoc
{this._y!==e&&(this._y=e,this.cb.call(this.scope))},Object.defineProperties(ObservablePoint.prototype,prototypeAccessors);/**
 * A number, or a string containing a number.
 * @memberof PIXI
 * @typedef {(PIXI.Point|PIXI.ObservablePoint)} IPoint
 */ /**
 * Two Pi.
 *
 * @static
 * @constant {number} PI_2
 * @memberof PIXI
 */var PI_2=2*Math.PI,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180,SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},Matrix=function(e,t,n,o,r,i){/**
     * @member {number}
     * @default 1
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 1
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=1),void 0===r&&(r=0),void 0===i&&(i=0),this.a=e,this.b=t,this.c=n,this.d=o,this.tx=r,this.ty=i,this.array=null},staticAccessors={IDENTITY:{configurable:!0},TEMP_MATRIX:{configurable:!0}};/**
 * Conversion factor for converting radians to degrees.
 *
 * @static
 * @constant {number} RAD_TO_DEG
 * @memberof PIXI
 */Matrix.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},Matrix.prototype.set=function(e,t,n,o,r,a){return this.a=e,this.b=t,this.c=n,this.d=o,this.tx=r,this.ty=a,this},Matrix.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},Matrix.prototype.apply=function(e,t){t=t||new Point;var n=e.x,o=e.y;return t.x=this.a*n+this.c*o+this.tx,t.y=this.b*n+this.d*o+this.ty,t},Matrix.prototype.applyInverse=function(e,t){t=t||new Point;var n=1/(this.a*this.d+this.c*-this.b),o=e.x,r=e.y;return t.x=this.d*n*o+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*r+-this.b*n*o+(-this.ty*this.a+this.tx*this.b)*n,t},Matrix.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},Matrix.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},Matrix.prototype.rotate=function(e){var t=Math.sin,n=Math.cos,o=n(e),r=t(e),a=this.a,i=this.c,d=this.tx;return this.a=a*o-this.b*r,this.b=a*r+this.b*o,this.c=i*o-this.d*r,this.d=i*r+this.d*o,this.tx=d*o-this.ty*r,this.ty=d*r+this.ty*o,this},Matrix.prototype.append=function(e){var t=this.a,n=this.b,o=this.c,r=this.d;return this.a=e.a*t+e.b*o,this.b=e.a*n+e.b*r,this.c=e.c*t+e.d*o,this.d=e.c*n+e.d*r,this.tx=e.tx*t+e.ty*o+this.tx,this.ty=e.tx*n+e.ty*r+this.ty,this},Matrix.prototype.setTransform=function(e,t,n,o,r,a,i,d,p){var s=Math.sin,c=Math.cos;return this.a=c(i+p)*r,this.b=s(i+p)*r,this.c=-s(i-d)*a,this.d=c(i-d)*a,this.tx=e-(n*this.a+o*this.c),this.ty=t-(n*this.b+o*this.d),this},Matrix.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,o=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},Matrix.prototype.decompose=function(e){var t=Math.sqrt,n=Math.abs,o=Math.atan2,r=this.a,a=this.b,i=this.c,p=this.d,d=-o(-i,p),s=o(a,r),c=n(d+s);return 1e-5>c||1e-5>n(PI_2-c)?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=d,e.skew.y=s),e.scale.x=t(r*r+a*a),e.scale.y=t(i*i+p*p),e.position.x=this.tx,e.position.y=this.ty,e},Matrix.prototype.invert=function(){var e=this.a,t=this.b,o=this.c,r=this.d,a=this.tx,i=e*r-t*o;return this.a=r/i,this.b=-t/i,this.c=-o/i,this.d=e/i,this.tx=(o*this.ty-r*a)/i,this.ty=-(e*this.ty-t*a)/i,this},Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Matrix.prototype.clone=function(){var e=new Matrix;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},Matrix.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},Matrix.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},staticAccessors.IDENTITY.get=function(){return new Matrix},staticAccessors.TEMP_MATRIX.get=function(){return new Matrix},Object.defineProperties(Matrix,staticAccessors);// Your friendly neighbour https://en.wikipedia.org/wiki/Dihedral_group
/*
 * Transform matrix for operation n is:
 * | ux | vx |
 * | uy | vy |
 */var ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],signum=Math.sign;/*
 * Initializes `rotationCayley` and `rotationMatrices`. It is called
 * only once below.
 */function init(){for(var e,t=0;16>t;t++){e=[];for(var n=0;16>n;n++)/* Multiplies rotation matrices i and j. */ /* Finds rotation matrix matching the product and pushes it. */for(var o=signum(ux[t]*ux[n]+vx[t]*uy[n]),r=signum(uy[t]*ux[n]+vy[t]*uy[n]),a=signum(ux[t]*vx[n]+vx[t]*vy[n]),d=signum(uy[t]*vx[n]+vy[t]*vy[n]),p=0;16>p;p++)if(ux[p]===o&&uy[p]===r&&vx[p]===a&&vy[p]===d){e.push(p);break}}for(var s,c=0;16>c;c++)s=new Matrix,s.set(ux[c],uy[c],vx[c],vy[c],0,0)}init();/**
 * Transform that takes care about its versions
 *
 * @class
 * @memberof PIXI
 */var Transform=function(){/**
     * The world transformation matrix.
     *
     * @member {PIXI.Matrix}
     */ /**
     * The local transformation matrix.
     *
     * @member {PIXI.Matrix}
     */ /**
     * The coordinate of the object relative to the local coordinates of the parent.
     *
     * @member {PIXI.ObservablePoint}
     */ /**
     * The scale factor of the object.
     *
     * @member {PIXI.ObservablePoint}
     */ /**
     * The pivot point of the displayObject that it rotates around.
     *
     * @member {PIXI.ObservablePoint}
     */ /**
     * The skew amount, on the x and y axis.
     *
     * @member {PIXI.ObservablePoint}
     */ /**
     * The rotation amount.
     *
     * @protected
     * @member {number}
     */ /**
     * The X-coordinate value of the normalized local X axis,
     * the first column of the local transformation matrix without a scale.
     *
     * @protected
     * @member {number}
     */ /**
     * The Y-coordinate value of the normalized local X axis,
     * the first column of the local transformation matrix without a scale.
     *
     * @protected
     * @member {number}
     */ /**
     * The X-coordinate value of the normalized local Y axis,
     * the second column of the local transformation matrix without a scale.
     *
     * @protected
     * @member {number}
     */ /**
     * The Y-coordinate value of the normalized local Y axis,
     * the second column of the local transformation matrix without a scale.
     *
     * @protected
     * @member {number}
     */ /**
     * The locally unique ID of the local transform.
     *
     * @protected
     * @member {number}
     */ /**
     * The locally unique ID of the local transform
     * used to calculate the current local transformation matrix.
     *
     * @protected
     * @member {number}
     */ /**
     * The locally unique ID of the world transform.
     *
     * @protected
     * @member {number}
     */ /**
     * The locally unique ID of the parent's world transform
     * used to calculate the current world transformation matrix.
     *
     * @protected
     * @member {number}
     */this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0},prototypeAccessors$1={rotation:{configurable:!0}};Transform.prototype.onChange=function(){this._localID++},Transform.prototype.updateSkew=function(){var e=Math.sin,t=Math.cos;// cos, added PI/2
// sin, added PI/2
this._cx=t(this._rotation+this.skew._y),this._sx=e(this._rotation+this.skew._y),this._cy=-e(this._rotation-this.skew._x),this._sy=t(this._rotation-this.skew._x),this._localID++},Transform.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},Transform.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){// concat the parent matrix with the objects transform.
var n=e.worldTransform,o=this.worldTransform;o.a=t.a*n.a+t.b*n.c,o.b=t.a*n.b+t.b*n.d,o.c=t.c*n.a+t.d*n.c,o.d=t.c*n.b+t.d*n.d,o.tx=t.tx*n.a+t.ty*n.c+n.tx,o.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}},Transform.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},prototypeAccessors$1.rotation.get=function(){return this._rotation},prototypeAccessors$1.rotation.set=function(e)// eslint-disable-line require-jsdoc
{this._rotation!==e&&(this._rotation=e,this.updateSkew())},Object.defineProperties(Transform.prototype,prototypeAccessors$1),Transform.IDENTITY=new Transform;/**
 * Size object, contains width and height
 *
 * @memberof PIXI
 * @typedef {object} ISize
 * @property {number} width - Width component
 * @property {number} height - Height component
 */ /**
 * Rectangle object is an area defined by its position, as indicated by its top-left corner
 * point (x, y) and by its width and its height.
 *
 * @class
 * @memberof PIXI
 */var Rectangle=function(e,t,n,o){/**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * The type of the object, mainly used to avoid `instanceof` checks
     *
     * @member {number}
     * @readOnly
     * @default PIXI.SHAPES.RECT
     * @see PIXI.SHAPES
     */void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=0),this.x=+e,this.y=+t,this.width=+n,this.height=+o,this.type=SHAPES.RECT},prototypeAccessors$2={left:{configurable:!0},right:{configurable:!0},top:{configurable:!0},bottom:{configurable:!0}},staticAccessors$1={EMPTY:{configurable:!0}};prototypeAccessors$2.left.get=function(){return this.x},prototypeAccessors$2.right.get=function(){return this.x+this.width},prototypeAccessors$2.top.get=function(){return this.y},prototypeAccessors$2.bottom.get=function(){return this.y+this.height},staticAccessors$1.EMPTY.get=function(){return new Rectangle(0,0,0,0)},Rectangle.prototype.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)},Rectangle.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},Rectangle.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},Rectangle.prototype.contains=function(e,t){return!(0>=this.width||0>=this.height)&&!!(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},Rectangle.prototype.pad=function(e,t){e=e||0,t=t||(0===t?0:e),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},Rectangle.prototype.fit=function(e){var t=Math.min,n=Math.max,o=n(this.x,e.x),r=t(this.x+this.width,e.x+e.width),a=n(this.y,e.y),i=t(this.y+this.height,e.y+e.height);this.x=o,this.width=n(r-o,0),this.y=a,this.height=n(i-a,0)},Rectangle.prototype.ceil=function(e,t){var n=Math.floor,o=Math.ceil;void 0===e&&(e=1),void 0===t&&(t=.001);var r=o((this.x+this.width-t)*e)/e,a=o((this.y+this.height-t)*e)/e;this.x=n((this.x+t)*e)/e,this.y=n((this.y+t)*e)/e,this.width=r-this.x,this.height=a-this.y},Rectangle.prototype.enlarge=function(e){var t=Math.min,n=Math.max,o=t(this.x,e.x),r=n(this.x+this.width,e.x+e.width),a=t(this.y,e.y),i=n(this.y+this.height,e.y+e.height);this.x=o,this.width=r-o,this.y=a,this.height=i-a},Object.defineProperties(Rectangle.prototype,prototypeAccessors$2),Object.defineProperties(Rectangle,staticAccessors$1);var eventemitter3=createCommonjsModule(function(e){/**
 * Constructor to create a storage for our `EE` objects.
 * An `Events` instance is a plain object whose properties are event names.
 *
 * @constructor
 * @private
 */function t(){}//
// We try to not inherit from `Object.prototype`. In some engines creating an
// instance in this way is faster than calling `Object.create(null)` directly.
// If `Object.create(null)` is not supported we prefix the event names with a
// character to make sure that the built-in object properties are not
// overridden or used as an attack vector.
//
/**
 * Representation of a single event listener.
 *
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} [once=false] Specify if the listener is a one-time listener.
 * @constructor
 * @private
 */function n(e,t,n){this.fn=e,this.context=t,this.once=n||!1}/**
 * Add a listener for a given event.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} context The context to invoke the listener with.
 * @param {Boolean} once Specify if the listener is a one-time listener.
 * @returns {EventEmitter}
 * @private
 */function o(e,t,o,r,a){if("function"!=typeof o)throw new TypeError("The listener must be a function");var i=new n(o,r||e,a),p=d?d+t:t;return e._events[p]?e._events[p].fn?e._events[p]=[e._events[p],i]:e._events[p].push(i):(e._events[p]=i,e._eventsCount++),e}/**
 * Clear event by name.
 *
 * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.
 * @param {(String|Symbol)} evt The Event name.
 * @private
 */function r(e,n){0==--e._eventsCount?e._events=new t:delete e._events[n]}/**
 * Minimal `EventEmitter` interface that is molded against the Node.js
 * `EventEmitter` interface.
 *
 * @constructor
 * @public
 */function a(){this._events=new t,this._eventsCount=0}/**
 * Return an array listing the events for which the emitter has registered
 * listeners.
 *
 * @returns {Array}
 * @public
 */var i=Object.prototype.hasOwnProperty,d="~";/**
 * Return the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Array} The registered listeners.
 * @public
 */ /**
 * Return the number of listeners listening to a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Number} The number of listeners.
 * @public
 */ /**
 * Calls each of the listeners registered for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @returns {Boolean} `true` if the event had listeners, else `false`.
 * @public
 */ /**
 * Add a listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */ /**
 * Add a one-time listener for a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn The listener function.
 * @param {*} [context=this] The context to invoke the listener with.
 * @returns {EventEmitter} `this`.
 * @public
 */ /**
 * Remove the listeners of a given event.
 *
 * @param {(String|Symbol)} event The event name.
 * @param {Function} fn Only remove the listeners that match this function.
 * @param {*} context Only remove the listeners that have this context.
 * @param {Boolean} once Only remove one-time listeners.
 * @returns {EventEmitter} `this`.
 * @public
 */ /**
 * Remove all listeners, or those of the specified event.
 *
 * @param {(String|Symbol)} [event] The event name.
 * @returns {EventEmitter} `this`.
 * @public
 */ //
// Alias methods names because people roll like that.
//
//
// Expose the prefix.
//
//
// Allow `EventEmitter` to be imported as module namespace.
//
Object.create&&(t.prototype=Object.create(null),!new t().__proto__&&(d=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)i.call(e,t)&&n.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e){var t=d?d+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,r=n.length,a=Array(r);o<r;o++)a[o]=n[o].fn;return a},a.prototype.listenerCount=function(e){var t=d?d+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,r,a){var p=d?d+e:e;if(!this._events[p])return!1;var s,c,l=this._events[p],y=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),y){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,r),!0;case 6:return l.fn.call(l.context,t,n,o,r,a),!0;}for(c=1,s=Array(y-1);c<y;c++)s[c-1]=arguments[c];l.fn.apply(l.context,s)}else{var m,h=l.length;for(c=0;c<h;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),y){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,n);break;case 4:l[c].fn.call(l[c].context,t,n,o);break;default:if(!s)for(m=1,s=Array(y-1);m<y;m++)s[m-1]=arguments[m];l[c].fn.apply(l[c].context,s);}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,n,o){var a=d?d+e:e;if(!this._events[a])return this;if(!t)return r(this,a),this;var p=this._events[a];if(p.fn)p.fn!==t||o&&!p.once||n&&p.context!==n||r(this,a);else{for(var s=0,c=[],l=p.length;s<l;s++)(p[s].fn!==t||o&&!p[s].once||n&&p[s].context!==n)&&c.push(p[s]);//
// Reset the array, or remove it completely if we have no more listeners.
//
c.length?this._events[a]=1===c.length?c[0]:c:r(this,a)}return this},a.prototype.removeAllListeners=function(e){var n;return e?(n=d?d+e:e,this._events[n]&&r(this,n)):(this._events=new t,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=d,a.EventEmitter=a,e.exports=a}),BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19,NONE:20,SRC_OVER:0,SRC_IN:21,SRC_OUT:22,SRC_ATOP:23,DST_OVER:24,DST_IN:25,DST_OUT:26,DST_ATOP:27,ERASE:26,SUBTRACT:28};/*!
 * @pixi/constants - v5.1.0
 * Compiled Fri, 19 Jul 2019 21:54:36 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */ /**
 * Various blend modes supported by PIXI.
 *
 * IMPORTANT - The WebGL renderer only supports the NORMAL, ADD, MULTIPLY and SCREEN blend modes.
 * Anything else will silently act like NORMAL.
 *
 * @memberof PIXI
 * @name BLEND_MODES
 * @enum {number}
 * @property {number} NORMAL
 * @property {number} ADD
 * @property {number} MULTIPLY
 * @property {number} SCREEN
 * @property {number} OVERLAY
 * @property {number} DARKEN
 * @property {number} LIGHTEN
 * @property {number} COLOR_DODGE
 * @property {number} COLOR_BURN
 * @property {number} HARD_LIGHT
 * @property {number} SOFT_LIGHT
 * @property {number} DIFFERENCE
 * @property {number} EXCLUSION
 * @property {number} HUE
 * @property {number} SATURATION
 * @property {number} COLOR
 * @property {number} LUMINOSITY
 * @property {number} NORMAL_NPM
 * @property {number} ADD_NPM
 * @property {number} SCREEN_NPM
 * @property {number} NONE
 * @property {number} SRC_IN
 * @property {number} SRC_OUT
 * @property {number} SRC_ATOP
 * @property {number} DST_OVER
 * @property {number} DST_IN
 * @property {number} DST_OUT
 * @property {number} DST_ATOP
 * @property {number} SUBTRACT
 * @property {number} SRC_OVER
 * @property {number} ERASE
 */settings.RETINA_PREFIX=/@([0-9\.]+)x/,settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;/**
 * Corrects PixiJS blend, takes premultiplied alpha into account
 *
 * @memberof PIXI.utils
 * @function mapPremultipliedBlendModes
 * @private
 * @param {Array<number[]>} [array] - The array to output into.
 * @return {Array<number[]>} Mapped modes.
 */function mapPremultipliedBlendModes(){for(var e=[],t=[],n=0;32>n;n++)e[n]=n,t[n]=n;e[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,e[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,e[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,t[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,t[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,t[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;return[t,e]}/**
 * maps premultiply flag and blendMode to adjusted blendMode
 * @memberof PIXI.utils
 * @const premultiplyBlendMode
 * @type {Array<number[]>}
 */var premultiplyBlendMode=mapPremultipliedBlendModes();/**
 * Remove items from a javascript array without generating garbage
 *
 * @function removeItems
 * @memberof PIXI.utils
 * @param {Array<any>} arr Array to remove elements from
 * @param {number} startIdx starting index
 * @param {number} removeCount how many to remove
 */function removeItems(e,t,n){var o,r=e.length;if(!(t>=r||0===n)){n=t+n>r?r-t:n;var a=r-n;for(o=t;o<a;++o)e[o]=e[o+n];e.length=a}}/**
 * Creates a Canvas element of the given size to be used as a target for rendering to.
 *
 * @class
 * @memberof PIXI.utils
 */var CanvasRenderTarget=function(e,t,n){/**
     * The Canvas object that belongs to this CanvasRenderTarget.
     *
     * @member {HTMLCanvasElement}
     */ /**
     * A CanvasRenderingContext2D object representing a two-dimensional rendering context.
     *
     * @member {CanvasRenderingContext2D}
     */this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||settings.RESOLUTION,this.resize(e,t)},prototypeAccessors$3={width:{configurable:!0},height:{configurable:!0}};CanvasRenderTarget.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},CanvasRenderTarget.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},CanvasRenderTarget.prototype.destroy=function(){this.context=null,this.canvas=null},prototypeAccessors$3.width.get=function(){return this.canvas.width},prototypeAccessors$3.width.set=function(e)// eslint-disable-line require-jsdoc
{this.canvas.width=e},prototypeAccessors$3.height.get=function(){return this.canvas.height},prototypeAccessors$3.height.set=function(e)// eslint-disable-line require-jsdoc
{this.canvas.height=e},Object.defineProperties(CanvasRenderTarget.prototype,prototypeAccessors$3),settings.SORTABLE_CHILDREN=!1;/**
 * 'Builder' pattern for bounds rectangles.
 *
 * This could be called an Axis-Aligned Bounding Box.
 * It is not an actual shape. It is a mutable thing; no 'EMPTY' or those kind of problems.
 *
 * @class
 * @memberof PIXI
 */var Bounds=function(){/**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */ /**
     * @member {number}
     * @default 0
     */this.minX=1/0,this.minY=1/0,this.maxX=-Infinity,this.maxY=-Infinity,this.rect=null};/**
 * Checks if bounds are empty.
 *
 * @return {boolean} True if empty.
 */Bounds.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Bounds.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-Infinity,this.maxY=-Infinity},Bounds.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(e=e||new Rectangle(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},Bounds.prototype.addPoint=function(e){var t=Math.min,n=Math.max;this.minX=t(this.minX,e.x),this.maxX=n(this.maxX,e.x),this.minY=t(this.minY,e.y),this.maxY=n(this.maxY,e.y)},Bounds.prototype.addQuad=function(e){var t=this.minX,n=this.minY,o=this.maxX,r=this.maxY,a=e[0],i=e[1];t=a<t?a:t,n=i<n?i:n,o=a>o?a:o,r=i>r?i:r,a=e[2],i=e[3],t=a<t?a:t,n=i<n?i:n,o=a>o?a:o,r=i>r?i:r,a=e[4],i=e[5],t=a<t?a:t,n=i<n?i:n,o=a>o?a:o,r=i>r?i:r,a=e[6],i=e[7],t=a<t?a:t,n=i<n?i:n,o=a>o?a:o,r=i>r?i:r,this.minX=t,this.minY=n,this.maxX=o,this.maxY=r},Bounds.prototype.addFrame=function(e,t,n,o,r){var i=e.worldTransform,p=i.a,a=i.b,s=i.c,c=i.d,d=i.tx,l=i.ty,m=this.minX,h=this.minY,_=this.maxX,u=this.maxY,f=p*t+s*n+d,g=a*t+c*n+l;m=f<m?f:m,h=g<h?g:h,_=f>_?f:_,u=g>u?g:u,f=p*o+s*n+d,g=a*o+c*n+l,m=f<m?f:m,h=g<h?g:h,_=f>_?f:_,u=g>u?g:u,f=p*t+s*r+d,g=a*t+c*r+l,m=f<m?f:m,h=g<h?g:h,_=f>_?f:_,u=g>u?g:u,f=p*o+s*r+d,g=a*o+c*r+l,m=f<m?f:m,h=g<h?g:h,_=f>_?f:_,u=g>u?g:u,this.minX=m,this.minY=h,this.maxX=_,this.maxY=u},Bounds.prototype.addVertexData=function(e,t,n){for(var o=this.minX,r=this.minY,a=this.maxX,d=this.maxY,p=t;p<n;p+=2){var s=e[p],c=e[p+1];o=s<o?s:o,r=c<r?c:r,a=s>a?s:a,d=c>d?c:d}this.minX=o,this.minY=r,this.maxX=a,this.maxY=d},Bounds.prototype.addVertices=function(e,t,n,o){for(var r=e.worldTransform,p=r.a,a=r.b,s=r.c,c=r.d,d=r.tx,l=r.ty,m=this.minX,h=this.minY,_=this.maxX,u=this.maxY,f=n;f<o;f+=2){var g=t[f],b=t[f+1],v=p*g+s*b+d,x=c*b+a*g+l;m=v<m?v:m,h=x<h?x:h,_=v>_?v:_,u=x>u?x:u}this.minX=m,this.minY=h,this.maxX=_,this.maxY=u},Bounds.prototype.addBounds=function(e){var t=this.minX,n=this.minY,o=this.maxX,r=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>o?e.maxX:o,this.maxY=e.maxY>r?e.maxY:r},Bounds.prototype.addBoundsMask=function(e,t){var n=e.minX>t.minX?e.minX:t.minX,o=e.minY>t.minY?e.minY:t.minY,r=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=r&&o<=a){var i=this.minX,d=this.minY,p=this.maxX,s=this.maxY;this.minX=n<i?n:i,this.minY=o<d?o:d,this.maxX=r>p?r:p,this.maxY=a>s?a:s}},Bounds.prototype.addBoundsArea=function(e,t){var n=e.minX>t.x?e.minX:t.x,o=e.minY>t.y?e.minY:t.y,r=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=r&&o<=a){var i=this.minX,d=this.minY,p=this.maxX,s=this.maxY;this.minX=n<i?n:i,this.minY=o<d?o:d,this.maxX=r>p?r:p,this.maxY=a>s?a:s}};// _tempDisplayObjectParent = new DisplayObject();
/**
 * The base class for all objects that are rendered on the screen.
 *
 * This is an abstract class and should not be used on its own; rather it should be extended.
 *
 * @class
 * @extends PIXI.utils.EventEmitter
 * @memberof PIXI
 */var DisplayObject=/*@__PURE__*/function(e){function t(){e.call(this),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._boundsID=0,this._lastBoundsID=-1,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={_tempDisplayObjectParent:{configurable:!0},x:{configurable:!0},y:{configurable:!0},worldTransform:{configurable:!0},localTransform:{configurable:!0},position:{configurable:!0},scale:{configurable:!0},pivot:{configurable:!0},skew:{configurable:!0},rotation:{configurable:!0},angle:{configurable:!0},zIndex:{configurable:!0},worldVisible:{configurable:!0},mask:{configurable:!0}};/**
     * @protected
     * @member {PIXI.DisplayObject}
     */return t.mixin=function(e){// in ES8/ES2017, this would be really easy:
// Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
// get all the enumerable property keys
// loop through properties
for(var n,o=Object.keys(e),r=0;r<o.length;++r)// Set the property using the property descriptor - this works for accessors and normal value properties
n=o[r],Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e,n))},n._tempDisplayObjectParent.get=function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent},t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(!this._boundsRect&&(this._boundsRect=new Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(!this._localBoundsRect&&(this._localBoundsRect=new Rectangle),e=this._localBoundsRect);var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,o},t.prototype.toGlobal=function(e,t,n){// don't need to update the lot
return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,n,o){// simply apply the matrix..
return t&&(e=t.toGlobal(e,n,o)),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)},t.prototype.render=function()// eslint-disable-line no-unused-vars
{// OVERWRITE;
},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(e,t,n,o,r,a,i,d,p){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=1),void 0===o&&(o=1),void 0===r&&(r=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===d&&(d=0),void 0===p&&(p=0),this.position.x=e,this.position.y=t,this.scale.x=n?n:1,this.scale.y=o?o:1,this.rotation=r,this.skew.x=a,this.skew.y=i,this.pivot.x=d,this.pivot.y=p,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},n.x.get=function(){return this.position.x},n.x.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.position.x=e},n.y.get=function(){return this.position.y},n.y.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.position.y=e},n.worldTransform.get=function(){return this.transform.worldTransform},n.localTransform.get=function(){return this.transform.localTransform},n.position.get=function(){return this.transform.position},n.position.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.position.copyFrom(e)},n.scale.get=function(){return this.transform.scale},n.scale.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.scale.copyFrom(e)},n.pivot.get=function(){return this.transform.pivot},n.pivot.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.pivot.copyFrom(e)},n.skew.get=function(){return this.transform.skew},n.skew.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.skew.copyFrom(e)},n.rotation.get=function(){return this.transform.rotation},n.rotation.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.rotation=e},n.angle.get=function(){return this.transform.rotation*RAD_TO_DEG},n.angle.set=function(e)// eslint-disable-line require-jsdoc
{this.transform.rotation=e*DEG_TO_RAD},n.zIndex.get=function(){return this._zIndex},n.zIndex.set=function(e)// eslint-disable-line require-jsdoc
{this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)},n.worldVisible.get=function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0},n.mask.get=function(){return this._mask},n.mask.set=function(e)// eslint-disable-line require-jsdoc
{this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)},Object.defineProperties(t.prototype,n),t}(eventemitter3);/**
 * DisplayObject default updateTransform, does not update children of container.
 * Will crash if there's no parent element.
 *
 * @memberof PIXI.DisplayObject#
 * @function displayObjectUpdateTransform
 */DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;function sortChildren(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}/**
 * A Container represents a collection of display objects.
 *
 * It is the base class of all display objects that act as a container for other objects (like Sprites).
 *
 *```js
 * let container = new PIXI.Container();
 * container.addChild(sprite);
 * ```
 *
 * @class
 * @extends PIXI.DisplayObject
 * @memberof PIXI
 */var Container=/*@__PURE__*/function(e){function t(){e.call(this),this.children=[],this.sortableChildren=settings.SORTABLE_CHILDREN,this.sortDirty=!1}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={width:{configurable:!0},height:{configurable:!0}};/**
     * Overridable method that can be used by Container subclasses whenever the children array is modified
     *
     * @protected
     */return t.prototype.onChildrenChange=function(){/* empty */},t.prototype.addChild=function(e){var t=arguments,n=arguments.length;// if there is only one argument we can bypass looping through the them
if(1<n)// loop through the arguments property and add all children
// use it the right way (.length and [i]) so that this function can still be optimized by JS runtimes
for(var o=0;o<n;o++)this.addChild(t[o]);else// ensure child transform will be recalculated
// ensure bounds will be recalculated
// TODO - lets either do all callbacks or all events.. not both!
e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(0>t||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e},t.prototype.swapChildren=function(e,t){if(e!==t){var n=this.getChildIndex(e),o=this.getChildIndex(t);this.children[n]=t,this.children[o]=e,this.onChildrenChange(n<o?n:o)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(0>t||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(e);removeItems(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(0>e||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments,n=arguments.length;// if there is only one argument we can bypass looping through the them
if(1<n)// loop through the arguments property and add all children
// use it the right way (.length and [i]) so that this function can still be optimized by JS runtimes
for(var o=0;o<n;o++)this.removeChild(t[o]);else{var r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);// ensure child transform will be recalculated..
return t.parent=null,t.transform._parentID=-1,removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t},t.prototype.removeChildren=function(e,t){void 0===e&&(e=0);var n,o=e,r="number"==typeof t?t:this.children.length,a=r-o;if(0<a&&a<=r){n=this.children.splice(o,a);for(var d=0;d<n.length;++d)n[d].parent=null,n[d].transform&&(n[d].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var p=0;p<n.length;++p)n[p].emit("removed",this),this.emit("childRemoved",n[p],this,p);return n}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.sortChildren=function(){for(var e,t=!1,n=0,o=this.children.length;n<o;++n)e=this.children[n],e._lastSortedIndex=n,t||0===e.zIndex||(t=!0);t&&1<this.children.length&&this.children.sort(sortChildren),this.sortDirty=!1},t.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e,t=0,n=this.children.length;t<n;++t)e=this.children[t],e.visible&&e.updateTransform()},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e,t=0;t<this.children.length;t++)(e=this.children[t],e.visible&&e.renderable)&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds));this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){// FILL IN//
},t.prototype.render=function(e){// if the object is not visible or the alpha is 0 then no need to render this element
if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)// do a quick check to see if this element has a mask or a filter.
if(this._mask||this.filters)this.renderAdvanced(e);else{this._render(e);// simple render children!
for(var t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}},t.prototype.renderAdvanced=function(e){e.batch.flush();var t=this.filters,n=this._mask;// push filter first as we need to ensure the stencil buffer is correct for any masking
if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<t.length;o++)t[o].enabled&&this._enabledFilters.push(t[o]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}n&&e.mask.push(this,this._mask),this._render(e);// now loop through the children and make sure they get rendered
for(var r=0,a=this.children.length;r<a;r++)this.children[r].render(e);e.batch.flush(),n&&e.mask.pop(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()},t.prototype._render=function()// eslint-disable-line no-unused-vars
{// this is where content itself gets rendered...
},t.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof t?t:t&&t.children,o=this.removeChildren(0,this.children.length);if(n)for(var r=0;r<o.length;++r)o[r].destroy(t)},n.width.get=function(){return this.scale.x*this.getLocalBounds().width},n.width.set=function(e)// eslint-disable-line require-jsdoc
{var t=this.getLocalBounds().width;this.scale.x=0===t?1:e/t,this._width=e},n.height.get=function(){return this.scale.y*this.getLocalBounds().height},n.height.set=function(e)// eslint-disable-line require-jsdoc
{var t=this.getLocalBounds().height;this.scale.y=0===t?1:e/t,this._height=e},Object.defineProperties(t.prototype,n),t}(DisplayObject);// performance increase to avoid using call.. (10x faster)
Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;/**
 * @class
 * @property { Bumber } x - 世界坐标 `x` 值
 * @property { Bumber } y - 世界坐标 `y` 值
 */var World=/** @class */function(e){function t(t){var n=e.call(this)||this;return n.init(),n.scene=t,n}return __extends(t,e),t.prototype.init=function(){this.x=0,this.y=0},t.prototype.onSceneChange=function(){this.init()},t.prototype.shutdown=function(){this.removeChildren()},t}(Container),Scene=/** @class */function(){function e(t){this.name=t,this.canUpdate=!1,this.world=new World(this),this.game=e.game,this.route=e.route,this.route.push(this)}/**
     * switchTo - 切换场景
     * @param { String } sceneName - 场景名
     * @param { Object } query - 场景参数
     *
     * @example
     *
     * import { Scene } from 'gamekit'
     * class SceneHome extends Scene {
     *     create() {
     *         this.switchTo('sceneTwo', {
     *             extra: 'data',
     *         })
     *     }
     * }
     */return e.prototype.switchTo=function(e,t){void 0===t&&(t={}),this.route.to(e,t)},e.prototype.getQuery=function(e){return e?this.route.query[e]:this.route.query},e.prototype.create=function(){},e.prototype.update=function(){},e.prototype.shutdown=function(e){void 0===e&&(e=!0),this.canUpdate=!1,e&&this.world.shutdown()},e}(),Route=/** @class */function(){function e(e){this.game=e,this.scenes={},this.query={},this.prevSceneName=null,this.currentSceneName=null,this.pendingSceneName=null,this.currentScene=null,this.instance=null}/**
     * 把场景保存在 `this.scenes` 中
     * @param { Scene } scene - 场景实例
     * @ignore
     */return e.prototype.push=function(e){this.scenes[e.name]=e},e.prototype.remove=function(e){"string"==typeof e?delete this.scenes[e]:e instanceof Scene?delete this.scenes[e.name]:console.warn("\u9700\u8981\u79FB\u9664\u7684\u573A\u666F "+e+" \u4E0D\u5B58\u5728")},e.prototype.start=function(e,t){void 0===e&&(e=""),void 0===t&&(t={}),this.to(e,t)},e.prototype.to=function(e,t){return this.currentSceneName!==e&&void(this.isScene(e)&&(this.pendingSceneName=e,this.query=t))},e.prototype.update=function(){this.pendingSceneName&&this.setCurrentScene(this.pendingSceneName),this.currentScene&&this.currentScene.canUpdate&&this.currentScene.update&&this.currentScene.update()},e.prototype.setCurrentScene=function(e){return this.isScene(e)?void(this.currentSceneName!==this.pendingSceneName&&(this.currentScene=this.scenes[e],this.setGameWorld(),this.cleanStage(),this.fetchNextScene(),this.stateUpdate(),this.onSceneChange())):(console.warn("\u573A\u666F "+e+" \u4E0D\u5B58\u5728"),!1)},e.prototype.setGameWorld=function(){this.game.world=this.currentScene.world},e.prototype.cleanStage=function(){this.game.stage.removeChildren()},e.prototype.fetchNextScene=function(){var e=this;this.game.stage.addChild(this.currentScene.world),this.currentScene.Load&&"function"==typeof this.currentScene.Load?this.currentScene.Load(function(){e.currentScene.create()}):this.currentScene.create(),this.pendingSceneName=null},e.prototype.stateUpdate=function(){this.prevSceneName=this.currentSceneName,this.currentSceneName=this.currentScene.name},e.prototype.onSceneChange=function(){if(this.prevSceneName){var e=this.scenes[this.prevSceneName];e.shutdown(),this.game.stage.removeChild(e.world)}this.currentScene.world.onSceneChange()},e.prototype.getCurrentScene=function(){return this.currentScene},e.prototype.getSceneByName=function(e){return this.scenes[e]?this.scenes[e]:void console.error("\u573A\u666F "+e+" \u4E0D\u5B58\u5728")},e.prototype.isScene=function(e){void 0===e&&(e="");var t=void 0!==this.scenes[e];return t},e.prototype.destroy=function(){this.game=null,this.scenes={},this.pendingSceneName=null,this.currentSceneName=null,this.currentScene=null},e}();function useScene(e,t){var n=new Route(e),o=Object.keys(t),r=Object.values(t);r.map(function(t,r){t.__proto__.game=e,t.__proto__.route=n,new t(o[r])}),n.start(o[0]),e.ticker.add(function(){return n.update()})}export{Scene,useScene};
//# sourceMappingURL=scene.es.min.js.map
